/*
//------------------------------------------------------ 
// –°–æ–∫–µ—Ç—ã   - –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
//------------------------------------------------------
// –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–æ–∫–µ—Ç? –ö–∞–∫–∏–º–∏ –æ–Ω–∏ –±—ã–≤–∞—é—Ç?
//------------------------------------------------------
–°–æ–∫–µ—Ç (–æ—Ç –∞–Ω–≥–ª. Socket - —Ä–∞–∑—ä–µ–º) ‚Äì —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è
–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –ë—ã–≤–∞—é—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∏
—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–æ–∫–µ—Ç—ã.
–ú–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, —á—Ç–æ TCPÓÇà—Å–æ–∫–µ—Ç ‚Äì —ç—Ç–æ ¬´—Ç—Ä—É–±–∞¬ª –º–µ–∂–¥—É –¥–≤—É–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –≤
–∫–æ—Ç–æ—Ä—É—é —Å –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ü–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, –∞ —Å –¥—Ä—É–≥–æ–≥–æ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è.
–ö —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å–æ–∫–µ—Ç–∞–º –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∏ —Ä–∞–±–æ—Ç–∞—Ç—å
–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
–°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–æ–∫–µ—Ç—ã –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞–º–∏, –∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å –∞–±–æ–Ω–µ–Ω—Ç–∞–º–∏.

//------------------------------------------------------
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–∫–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
//------------------------------------------------------
–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –∞–¥—Ä–µ—Å–∞ –∏ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞. –ê–¥—Ä–µ—Å
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π 4 —á–∏—Å–ª–∞, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏. –ù–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ ‚Äì —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
–æ—Ç 0 –¥–æ 65535.

  –ê–¥—Ä–µ—Å                     –ê–¥—Ä–µ—Å
192.168.0.2              192.168.0.1  
    –ø–æ—Ä—Ç                    –ø–æ—Ä—Ç
    6500       <-->         6500   
    
//------------------------------------------------------
// –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–õ–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Ç¬ª –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É TCP
//------------------------------------------------------
//              –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏
//------------------------------------------------------
–ù–∞–ø–∏—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (—á–∞—Ç) –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ Linux
–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äì —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç
–ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–ø–∏–Ω–≥-–ø–æ–Ω–≥¬ª: –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è
—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ
–°–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º ‚Äú*ÀÆ
–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª #

//------------------------------------------------------
// –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
//------------------------------------------------------
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´–õ–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Ç¬ª –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ ¬´–∫–ª–∏–µ–Ω—Ç-
—Å–µ—Ä–≤–µ—Ä¬ª –Ω–∞ —ç—Ç–∞–ø–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
—Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
üíª –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö                     - socket 
üíª –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–∫–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è                   - socket 
üíª –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã server_addr—Å         - bind
üíª –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–∫–µ—Ç–∞                              - bind
üíª –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–∞                         - listen
üíª –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤                         - accept

socket -> bind -> listen -> accept

//------------------------------------------------------
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞—á–∞–ª–æ)
//------------------------------------------------------

struct sockaddr_in
{
    short  sin_family;
    u_short sin_port;
    struct in_addr sin_addr;
    char sin_zero[8];
};

6. serv_addr –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
7. socklen_t - –¥–ª–∏–Ω–æ–π –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ 32 –±–∏—Ç–∞

*/

#include <stdio.h>      // printf, perror
#include <stdbool.h>    // —Ç–∏–ø bool
#include <string.h>     // memset, strlen
#include <sys/types.h>  // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã (ssize_t –∏ –¥—Ä.)
#include <sys/socket.h> // socket, setsockopt, bind, listen, accept, recv, send
#include <netinet/in.h> // struct sockaddr_in, htons, htonl
#include <arpa/inet.h>  // inet_ntoa
#include <stdlib.h>     // exit, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
#include <unistd.h>     // close

#define PORT 1500       // TCP-–ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–≤–µ—Ä
#define BUF_SIZE 1024   // —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –ø—Ä–∏—ë–º–∞/–æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö

int main(void)
{
    int server_fd;          // –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä "—Å–ª—É—à–∞—é—â–µ–≥–æ" —Å–æ–∫–µ—Ç–∞ (—Å–µ—Ä–≤–µ—Ä)
    int client_fd = -1;     // –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    bool isExit = false;    // —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
    char buffer[BUF_SIZE];  // –±—É—Ñ–µ—Ä –¥–ª—è –ø—Ä–∏—ë–º–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

    struct sockaddr_in server_addr; // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∞–¥—Ä–µ—Å–æ–º —Å–µ—Ä–≤–µ—Ä–∞
    socklen_t addrlen = sizeof(server_addr);

    // 1. –°–æ–∑–¥–∞—ë–º —Å–æ–∫–µ—Ç
    // AF_INET      ‚Äî IPv4
    // SOCK_STREAM  ‚Äî –ø–æ—Ç–æ–∫–æ–≤—ã–π —Å–æ–∫–µ—Ç (TCP)
    // 0            ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (TCP –¥–ª—è SOCK_STREAM)
    server_fd = socket(AF_INET, SOCK_STREAM, 0);
    printf("SERVER\n");
    if (server_fd < 0) {
        perror("socket");   // –≤—ã–≤–æ–¥–∏–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        return 1;
    }
    printf("=> Socket server has been created...\n");

    // –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç (SO_REUSEADDR), —á—Ç–æ–±—ã
    // –ø—Ä–∏ —á–∞—Å—Ç–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–µ–∂–µ –ø–æ–ª—É—á–∞—Ç—å "Address already in use".
    int opt = 1;
    if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt)) < 0) {
        perror("setsockopt");
        close(server_fd);
        return 1;
    }

    // 2. –ó–∞–ø–æ–ª–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
    memset(&server_addr, 0, sizeof(server_addr));   // –æ–±–Ω—É–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    server_addr.sin_family      = AF_INET;          // IPv4
    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);// —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
    server_addr.sin_port        = htons(PORT);      // –ø–æ—Ä—Ç –≤ —Å–µ—Ç–µ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ –±–∞–π—Ç

    // 3. –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Å–æ–∫–µ—Ç –∫ –∞–¥—Ä–µ—Å—É/–ø–æ—Ä—Ç—É
    // –ü–æ—Å–ª–µ bind —è–¥—Ä–æ –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç –ø–æ—Ä—Ç –≤ –¥–∞–Ω–Ω—ã–π —Å–æ–∫–µ—Ç.
    if (bind(server_fd, (struct sockaddr *)&server_addr, sizeof(server_addr)) < 0) {
        perror("bind");
        close(server_fd);
        return 1;
    }

    printf("=> Looking for clients on port %d...\n", PORT);

    // 4. –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–æ–∫–µ—Ç –≤ —Ä–µ–∂–∏–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
    // listen –¥–µ–ª–∞–µ—Ç —Å–æ–∫–µ—Ç "–ø–∞—Å—Å–∏–≤–Ω—ã–º" ‚Äî –æ–Ω –∂–¥—ë—Ç –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.
    if (listen(server_fd, 1) < 0) {
        perror("listen");
        close(server_fd);
        return 1;
    }

    // 5. –ü—Ä–∏–Ω–∏–º–∞–µ–º –æ–¥–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    // accept –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –ø—Ä–∏—Ö–æ–¥–∞ –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Å–æ–∫–µ—Ç client_fd
    // –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º.
    client_fd = accept(server_fd, (struct sockaddr *)&server_addr, &addrlen);
    if (client_fd < 0) {
        perror("accept");
        close(server_fd);
        return 1;
    }

    printf("=> Connected with client %s\n", inet_ntoa(server_addr.sin_addr));
    printf("=> Type '#' to end the connection.\n\n");

    // 6. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º
    while (!isExit) {
        ssize_t nbytes;

        // -------- –ß–¢–ï–ù–ò–ï –û–¢ –ö–õ–ò–ï–ù–¢–ê --------
        printf("Client: ");
        fflush(stdout);  // –≤—ã–≤–æ–¥–∏–º –ø–æ–¥—Å–∫–∞–∑–∫—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

        // recv —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ–∫–µ—Ç–∞ client_fd
        nbytes = recv(client_fd, buffer, BUF_SIZE - 1, 0);
        if (nbytes <= 0) {
            // nbytes == 0 ‚Äî –∫–ª–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            // nbytes < 0  ‚Äî –æ—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è (–≤—ã–≤–æ–¥–∏–º perror)
            if (nbytes < 0) perror("recv");
            printf("\n=> Client disconnected.\n");
            break;
        }

        // –î–µ–ª–∞–µ–º –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤ C-—Å—Ç—Ä–æ–∫—É
        buffer[nbytes] = '\0';
        printf("%s\n", buffer);

        // –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏—Å–ª–∞–ª —Å—Ç—Ä–æ–∫—É, –Ω–∞—á–∏–Ω–∞—é—â—É—é—Å—è —Å '#', —Å—á–∏—Ç–∞–µ–º —ç—Ç–æ
        // –∫–æ–º–∞–Ω–¥–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞.
        if (buffer[0] == '#') {
            isExit = true;
            break;
        }

        // -------- –û–¢–í–ï–¢ –°–ï–†–í–ï–†–ê (–≤–≤–æ–¥ —á–µ—Ä–µ–∑ getchar) --------
        printf("Server: ");
        fflush(stdout);

        // —á–∏—Ç–∞–µ–º –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ –¥–æ —Å–∏–º–≤–æ–ª–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ '\n' –∏–ª–∏ EOF
        int cntr = 0;
        int ch;

        // –ï—Å–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è scanf, –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ
        // "—Å—ä–µ—Å—Ç—å" –ª–∏—à–Ω–∏–π '\n' –∏–∑ –±—É—Ñ–µ—Ä–∞ –≤–≤–æ–¥–∞:
        // ch = getchar();

        while ((ch = getchar()) != '\n' && ch != EOF && cntr < BUF_SIZE - 1) {
            buffer[cntr++] = (char)ch;
        }
        buffer[cntr] = '\0';  // –∑–∞–≤–µ—Ä—à–∞–µ–º —Å—Ç—Ä–æ–∫—É –Ω—É–ª—ë–º

        // –ü—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
        if (cntr == 0) {
            // –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–±—Ä–∞–ª–∏ ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
            continue;
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–≤–µ–¥—ë–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –∫–ª–∏–µ–Ω—Ç—É
        send(client_fd, buffer, strlen(buffer), 0);

        // –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –æ—Ç–≤–µ—Ç–∞ ‚Äî '#', —Ç–æ–∂–µ —Å—á–∏—Ç–∞–µ–º —ç—Ç–æ –∫–æ–º–∞–Ω–¥–æ–π –≤—ã—Ö–æ–¥–∞.
        if (buffer[0] == '#') {
            isExit = true;
            break;
        }
    }

    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã: –∑–∞–∫—Ä—ã–≤–∞–µ–º –æ–±–∞ —Å–æ–∫–µ—Ç–∞
    printf("\n=> Connection terminated with IP %s\n", inet_ntoa(server_addr.sin_addr));
    close(client_fd);
    close(server_fd);
    printf("Goodbye...\n");

    return 0;
}