//--------------------------------------------------------
//         Указатели на функцию
//--------------------------------------------------------
/*
Указатель на функцию содержит адрес её кода (тела функции).

Общая форма объявления указателя на функцию:

    returnType (*funcPtr)(paramType1, paramType2, ...);

где
  - returnType  — тип возвращаемого значения функции
  - funcPtr     — имя указателя
  - paramTypeN  — типы параметров функции

Пример:

    int f(int n);

    int (*fp)(int);  // fp — указатель на функцию, принимающую int и
                     //       возвращающую int
    fp = f;          // присвоили адрес функции f
    fp(5);           // вызов функции через указатель (эквивалентен f(5))

Такой механизм используется, в том числе, для «обратных вызовов» (callback),
например, как обработчики прерываний в микроконтроллерах.
*/

#include <stdio.h>
#include <inttypes.h>

// Обычная функция: принимает int, печатает сообщение и возвращает n+1
int func(int n) 
{
    printf("Hello func %d\n", n);
    return n + 1;
}

int main(void)
{
    // Объявляем указатель fp на функцию вида:
    //   int some_func(int);
    int (*fp)(int);

    // В переменную fp записываем адрес функции func.
    // Можно писать fp = &func;, но & необязателен — func неявно
    // приводится к указателю на функцию.
    fp = func;

    // Вызов функции через указатель:
    //   fp(5) — то же самое, что и func(5).
    int res = fp(5);

    printf("Result = %d\n", res); // выведет 6

    return 0;
}