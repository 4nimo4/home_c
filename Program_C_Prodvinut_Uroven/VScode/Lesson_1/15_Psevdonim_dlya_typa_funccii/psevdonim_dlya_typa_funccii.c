//--------------------------------------------------------
//        Псевдоним для типа функции
//--------------------------------------------------------
/*
Обычные указатели на функции в параметрах выглядят громоздко, например:

    int operation(int (*op)(int, int), int a, int b);

Чтобы сделать код более читаемым, можно ввести псевдоним
(типовое имя) для типа функции через typedef.
*/

#include <stdio.h>

// Определяем псевдоним типа функции binary_op:
//   это ЛЮБАЯ функция, которая принимает (int, int)
//   и возвращает int.
//
// Важно: это тип "функция", а не "указатель на функцию".
// В параметрах он неявно преобразуется к указателю.
typedef int (binary_op)(int, int);

// Функция сложения, подходит под тип binary_op
int sum(int x, int y) 
{ 
    return x + y;
}

// Функция вычитания, тоже подходит под binary_op
int subtract(int x, int y) 
{ 
    return x - y;
}

// Функция высшего порядка: принимает КАК ПАРАМЕТР другую функцию.
// Вместо громоздкого вида:
//   int operation(int (*op)(int, int), int a, int b)
// мы пишем:
//   int operation(binary_op op, int a, int b)
//
// Здесь op — параметр-функция (на практике — указатель на функцию),
// которую мы вызываем внутри operation.
int operation(binary_op op, int a, int b)
{
    // Вызов переданной функции op с аргументами a и b
    return op(a, b);
}

int main(void)
{
    // Передаём функцию sum как аргумент:
    // operation суммирует 10 и 5 → 15
    printf("result = %d\n", operation(sum, 10, 5));

    // Передаём функцию subtract как аргумент:
    // operation вычитает 5 из 10 → 5
    printf("result = %d\n", operation(subtract, 10, 5));

    return 0;
}

