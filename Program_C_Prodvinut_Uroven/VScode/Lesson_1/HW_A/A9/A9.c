/*-------------------------------------------------------------------
 * A9.c
 * ------------------------------------------------------------------
 * Упаковать массив
 * ------------------------------------------------------------------
 * В программе реализована структура данных:
struct pack_array 
{
    uint32_t array; // поле для хранения упакованного массива из 0 и 1
    uint32_t count0 : 8; // счетчик нулей в array
    uint32_t count1 : 8; // счетчик единиц в array
}
Необходимо реализовать программу, которая упаковывает переданный ей массив 
из 32-ух элементов 0 и 1 в указанную структуру данных.
Функция должна строго соответствовать прототипу:
void array2struct(int [], struct pack_array *)
 * ------------------------------------------------------------------
 */

#include <stdio.h>
#include <inttypes.h>

struct pack_array 
{
    uint32_t array;      // поле для хранения упакованного массива из 0 и 1
    uint32_t count0 : 8; // счетчик нулей в array
    uint32_t count1 : 8; // счетчик единиц в array
};

void array2struct(int arr[], struct pack_array *p)
{
    uint32_t value = 0;  // здесь будем накапливать биты
    uint32_t c0 = 0;     // счётчик нулей
    uint32_t c1 = 0;     // счётчик единиц

    for (int i = 0; i < 32; i++) {
        int bit = arr[i] ? 1 : 0;  // всё ненулевое считаем за 1

        if (bit == 1) {
            c1++;
            // Кладём arr[i] в бит (31 - i):
            // arr[0] -> бит 31 (старший), arr[31] -> бит 0 (младший)
            value |= (1u << (31 - i));
        } else {
            c0++;
            // Ноль уже по умолчанию, ничего ставить не нужно
        }
    }

    p->array  = value;
    p->count0 = c0;
    p->count1 = c1;
}

// Для проверки
int main(void)
{
    int a[32];
    for (int i = 0; i < 32; i++) {
        if (scanf("%d", &a[i]) != 1) return 1;
    }

    struct pack_array pa;
    array2struct(a, &pa);

    printf("%" PRIu32 " %u %u\n", pa.array, pa.count0, pa.count1);
    return 0;
}