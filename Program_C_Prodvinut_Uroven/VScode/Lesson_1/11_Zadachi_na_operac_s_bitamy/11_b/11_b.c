//--------------------------------------------------------
//  Опишите функцию, которая умножает вещественное число float на 4.
//  Операцию умножения использовать запрещено.
//--------------------------------------------------------

#include <stdio.h>
#include <inttypes.h>

// Объединение для доступа к внутреннему представлению float.
//
// Формат IEEE‑754 для 32-битного float:
//   [ sign (1) | exponent (8) | mantissa (23) ]
//
// sign     — бит знака (0 — плюс, 1 — минус)
// exponent — порядок со смещением (biased exponent, bias = 127)
// mantissa — дробная часть (fraction, без ведущей единицы)
//
// Важное допущение: такая раскладка работает на типичных x86-компиляторах,
// но формально зависит от реализации (порядок битовых полей не стандартизован).
union floatbit 
{
    float value;  // то же самое число в обычном виде

    struct 
    {
        uint32_t mant : 23; // 23 бита мантиссы (младшие биты)
        uint32_t exp  : 8;  // 8 бит порядка
        uint32_t sign : 1;  // 1 бит знака (старший бит)
    } bit;
};

//--------------------------------------------------------
//  Функция mult4
//  Умножает число float на 4, не используя оператор *.
//--------------------------------------------------------
// Идея:
//
// В IEEE‑754 умножение на 2^k сводится к увеличению порядка на k:
//
//   f = (-1)^sign * 1.mantissa * 2^(exp - 127)
//
//   f * 2^k = (-1)^sign * 1.mantissa * 2^((exp - 127) + k)
//           → тот же знак и мантисса, но exponent увеличен на k.
//
// 4 = 2^2, значит, достаточно увеличить exponent на 2.
float mult4(float f) 
{
    union floatbit tmp;

    // Копируем аргумент в union: и как float, и как набор бит.
    tmp.value = f;

    // Увеличиваем порядок на 2 → умножение на 2^2 = 4.
    //
    // Здесь мы не обрабатываем спецслучаи (NaN, ±∞, денормалы, переполнение),
    // поскольку задача учебная и предполагает «нормальные» числа.
    tmp.bit.exp += 2;

    // Читаем обратно как обычный float — число уже с изменённым порядком.
    return tmp.value;
}

int main(void)
{
    float x;

    // Просим пользователя ввести число с плавающей точкой
    printf("Enter float: ");
    if (scanf("%f", &x) != 1) {
        // Если ввод не удался (например, не число) — выводим ошибку
        printf("Input error\n");
        return 1;
    }

    // Вызываем функцию умножения на 4
    float y = mult4(x);

    // Показываем исходное значение и результат
    printf("x    = %f\n", x);
    printf("x*4  = %f\n", y);

    return 0;
}