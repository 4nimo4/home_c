//--------------------------------------------------------
//   Поменяйте знак переменной x типа float с помощью битовых операций
//--------------------------------------------------------

#include <stdio.h>
#include <inttypes.h>

// Функция меняет знак числа с плавающей точкой (float)
// без использования арифметики: f = -f;
// Используется знание формата IEEE-754 для 32-битного float.
void changeSign(float *f) 
{
    // Объединение позволяет интерпретировать одни и те же 4 байта
    // либо как float, либо как 32-битное целое число (uint32_t).
    union {
        float    f; // число с плавающей точкой
        uint32_t u; // его же биты как беззнаковое целое
    } tmp;

    // Копируем значение по указателю в поле float объединения
    tmp.f = *f;

    // Формат IEEE-754 для float (32 бита):
    //   bit 31  — знак (0 — плюс, 1 — минус)
    //   bits 30..23 — порядок (8 бит)
    //   bits 22..0  — мантисса (23 бита)
    //
    // Маска 0x80000000 имеет установлен только старший бит:
    //   1000 0000 0000 0000 0000 0000 0000 0000₂
    //
    // Операция XOR с этой маской инвертирует бит знака:
    //   был 0 → станет 1 (плюс → минус)
    //   был 1 → станет 0 (минус → плюс)
    tmp.u = tmp.u ^ 0x80000000;

    // Записываем изменённое значение обратно по указателю
    *f = tmp.f;
}

int main(void)
{
    float f = 4.0;

    // Передаём адрес переменной f, чтобы функция могла её изменить
    changeSign(&f);

    // Теперь f должно стать -4.0
    printf("%f\n", f);

    return 0;
}
//Ключевая идея: у float знак — это просто один бит. 
//Инвертируя этот бит через XOR с маской 0x80000000, 
//мы меняем знак числа, не используя обычную операцию f = -f;
