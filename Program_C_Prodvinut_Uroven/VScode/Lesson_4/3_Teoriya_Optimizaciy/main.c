/*
//------------------------------------------------------
//      –¢–µ–æ—Ä–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
//------------------------------------------------------ 
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º ‚Äì –ø—Ä–æ—Ü–µ—Å—Å —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —á–∞—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö
–∫—Ä–∏—Ç–µ—Ä–∏–µ–≤. –ê –Ω–µ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –ø–æ–∏—Å–∫—É –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞, —Ç.–µ. –≤–∞—Ä–∏–∞–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π
–Ω–µ–ª—å–∑—è —É–ª—É—á—à–∏—Ç—å.
–¶–µ–ª—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
–¥—Ä—É–≥–æ–≥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞, –æ–±–ª–∞–¥–∞—é—â–µ–≥–æ –∂–µ–ª–∞–µ–º—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
–û—Å–Ω–æ–≤–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º —è–≤–ª—è—é—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
‚óè –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
‚óè –û–±—ä–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–∞–º—è—Ç–∏
‚óè –û–±—ä–µ–º –º–µ—Å—Ç–∞, –∑–∞–Ω–∏–º–∞–µ–º–æ–≥–æ –Ω–∞ –¥–∏—Å–∫–µ

–ö–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è?
–°–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç–∞—è —Ç—Ä–∞—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏
–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞, –µ—Å–ª–∏ –ª—é–±–æ–µ –∏–∑ —ç—Ç–∏—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –≤–µ—Ä–Ω–æ:
‚óè –ß–∞—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –µ—â–µ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–∞
‚óè –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –æ—Ç–ª–∞–∂–µ–Ω–∞
‚óè –ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ

–ö–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è?
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–Ω—è—Ç—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:
‚óè –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–µ–¥–∫–æ –∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
‚óè –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.
‚óè –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω—É–∂–Ω–∞

–ü—Ä–æ—Ñ–∞–π–ª–µ—Ä ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π
—Å–æ–±–∏—Ä–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–°–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞ –¥–ª—è
–≤—ã—è–≤–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ. –ë—ã–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ —É–≥–∞–¥–∞—Ç—å, –∫–∞–∫–∞—è —á–∞—Å—Ç—å –≤–∞—à–µ–π
–ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤, –∏ –µ—Å–ª–∏ –≤—ã –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç–µ—Å—å –Ω–∞
–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è—Ö, –∞ –Ω–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç–µ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞
—É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ç–µ—Ö —á–∞—Å—Ç–µ–π –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∏ —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–ª–∏ –±—ã—Å—Ç—Ä–æ.

Bottleneck
–ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ bottleneck (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π
–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—ã—Å—è—á—É —Ä–∞–∑), –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–µ—Ä–µ–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
—Ç–∞–∫, —á—Ç–æ–±—ã –µ–π –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–∏–∫–ª —Ç—ã—Å—è—á—É —Ä–∞–∑.
–≠—Ç–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —á–µ–º –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 10% –±—ã—Å—Ç—Ä–µ–µ.

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è?
–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
‚óè –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ ‚Äú—É–∑–∫–æ–µ –º–µ—Å—Ç–æÀÆ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—ã—Å—è—á—É —Ä–∞–∑)
‚óè –õ—É—á—à–µ –≤—Å–µ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç–∞–∫, —á—Ç–æ–±—ã –µ–π –Ω–µ
–ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–∏–∫–ª —Ç—ã—Å—è—á—É —Ä–∞–∑
‚óè –≠—Ç–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —á–µ–º –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 10% –±—ã—Å—Ç—Ä–µ–µ
–°–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–æ—Ç–æ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ!

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
–¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–Ω—è—Ç—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.
–ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á—ë—Ç–æ–≤, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
–≤ –¥–µ–Ω—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ—ë –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –Ω–∞ –æ–±–µ–¥, –∏ –≤
—Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∑–∞–≤–µ—Ä—à–∞—Ç—å –µ—ë –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–±–µ–¥
–∑–∞–∫–æ–Ω—á–∏—Ç—Å—è, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—ë—Ç—Å—è.
–ï—Å–ª–∏ –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–∂–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –≤–∞—à–∞, —Ç–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–æ–≤–∞ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç —Ä–∞–∑–Ω–∏—Ü—ã. –ù–æ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
—Å–æ–±—ã—Ç–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º—ã—à–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç
–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ª—é–±—É—é –∑–∞–º–µ—Ç–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É.
–£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑—É–º–Ω–æ–π, —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª–Ω–æ–π
–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ ¬´—Ä–µ–∞–ª—å–Ω—ã—Ö¬ª –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ —É
–≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –≤—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º, —Ç–æ –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å
—Ç–µ—Å—Ç–æ–≤—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã –ø–æ–∫—Ä—ã—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —É–∑–∫–∏—Ö
–º–µ—Å—Ç.

–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚óè –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ time() –∏ clock() —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ
–∫–æ–¥–∞. –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ ¬´–∫–∞–∂–µ—Ç—Å—è¬ª –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —ç—Ç–æ –º–æ–∂–µ—Ç
–±—ã—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ–ª–∏ —Å–µ–∫—É–Ω–¥ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
‚óè –ó–∞–¥–µ—Ä–∂–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω—ã: –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏, –ø–∞–º—è—Ç—å—é –∏–ª–∏ –≤–≤–æ–¥–∞–º-–≤—ã–≤–æ–¥–æ–º.
‚óè –í –≤–∞—à–µ–π –û–° –º–æ–≥—É—Ç –±—ã—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã time.
–ò–Ω–æ–≥–¥–∞ –æ–Ω–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–±–æ–ª–æ—á–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, csh) –∏ –∏–º–µ—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑—è—â–Ω—ã—Ö
–æ–ø—Ü–∏–π.
‚óè –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ getrusage(),
–µ—Å–ª–∏ –æ–Ω —É –≤–∞—Å –µ—Å—Ç—å, –∏, –∫–æ–Ω–µ—á–Ω–æ, –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ gprof,
prof –∏ tcov.

//------------------------------------------------------
//      –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ Windows
//------------------------------------------------------
–ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ üïê
–§—É–Ω–∫—Ü–∏—è GetProcessTimes() –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É FILETIME –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.
–§—É–Ω–∫—Ü–∏—è FileTimeToSystemTime() –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É FILETIME –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É SYSTEMTIME,
—Å–æ–¥–µ—Ä–∂–∞—â—É—é –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏. (C/C++: –∫–∞–∫ –∏–∑–º–µ—Ä—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è)

typedef struct _SYSTEMTIME {
WORD wYear;
WORD wMonth;
WORD wDayOfWeek;
WORD wDay;
WORD wHour;
WORD wMinute;
WORD wSecond;
WORD wMilliseconds;
} SYSTEMTIME, *PSYSTEMTIME;

FILETIME createTime, exitTime, kernelTime,
userTime;
if(GetProcessTimes(GetCurrentProcess(),&createTime
, &exitTime, &kernelTime, &userTime ) != -1 )
{
SYSTEMTIME userSystemTime;
if (FileTimeToSystemTime( &userTime,
&userSystemTime ) != -1 )
return (double)userSystemTime.wHour * 3600.0;
}

//------------------------------------------------------
//–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
//------------------------------------------------------

#include <Windows.h>

double getCPUTime(void)     // Windows 
{ 
    FILETIME createTime, exitTime, kernelTime, userTime;
    if(GetProcessTimes(GetCurrentProcess(), &createTime, &exitTime, &kernelTime, &userTime) != -1 )
    {
        SYSTEMTIME userSystemTime;
        if(FileTimeToSystemTime(&userTime, &userSystemTime)!= -1 )
            return (double)userSystemTime.wHour * 3600.0 + 
                (double)userSystemTime.wMinute * 60.0 +
                (double)userSystemTime.wSecond +
                (double)userSystemTime.wMilliseconds / 1000.0;
    }
    return -1; // Failed.
}

int main(int argc, char **argv)
{
    double startTime, endTime;
    startTime = getCPUTime( );
    for(int i=0;i<10000000;i++)
    {}
    endTime = getCPUTime( );
    printf( "CPU time used = %lf\n", (endTime-startTime));
    return 0;
}

//------------------------------------------------------
//      –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ Linux
//------------------------------------------------------
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è getrusage(). –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ usage, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–ª—è.
–í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:
üïë ru_utime –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –≤ —Ä–µ–∂–∏–º–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π timeval (—Å–µ–∫—É–Ω–¥—ã –∏
–º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã).
üïë ru_stime –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –≤ —Ä–µ–∂–∏–º–µ —è–¥—Ä–∞,
–≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π timeval (—Å–µ–∫—É–Ω–¥—ã –∏ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã).
üïë ru_maxrss –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
–∑–∞–Ω–∏–º–∞–µ–º—ã–π –≤ –ø–∞–º—è—Ç–∏ (–≤ –±–∞–π—Ç–∞—Ö).
*/

#include <sys/time.h>     // —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º (struct timeval)
#include <sys/resource.h> // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ rusage –∏ —Ñ—É–Ω–∫—Ü–∏—è getrusage
#include <unistd.h>       // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ POSIX-—Ñ—É–Ω–∫—Ü–∏–∏ (–∑–¥–µ—Å—å –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
#include <stdio.h>        // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥ (printf –∏ —Ç.–ø.)

int main() 
{
    struct rusage usage;              // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞
    struct timeval startu, endu;      // –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user mode)
    struct timeval starts, ends;      // –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ —è–¥—Ä–∞ (system mode)
    int k = 0;                        // –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —á—Ç–æ–±—ã —Ü–∏–∫–ª —á—Ç–æ‚Äë—Ç–æ –¥–µ–ª–∞–ª (–Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º)

    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
    getrusage(RUSAGE_SELF, &usage);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º ¬´—Å—Ç–∞—Ä—Ç–æ–≤–æ–µ¬ª –≤—Ä–µ–º—è:
    startu = usage.ru_utime; // –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç
    starts = usage.ru_stime; // –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –≤ —Ä–µ–∂–∏–º–µ —è–¥—Ä–∞ –Ω–∞ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç

    //int arr[100000]={0}; // –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (ru_maxrss)

    // –î–≤–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–∞ —Å–æ–∑–¥–∞—é—Ç –∑–∞–º–µ—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
    for (int i = 0; i < 10000; i++) 
    {
        for (int j = 0; j < 10000; j++) // –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—É —Ü–∏–∫–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 20000) –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
        {
            k += 20; // –ø—Ä–æ—Å—Ç–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —á—Ç–æ–±—ã CPU –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ‚Äë—Ç–æ –¥–µ–ª–∞–ª
        }
    }

    // –°–Ω–æ–≤–∞ —Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤
    getrusage(RUSAGE_SELF, &usage);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º ¬´–∫–æ–Ω–µ—á–Ω–æ–µ¬ª –≤—Ä–µ–º—è:
    endu = usage.ru_utime; // –≤—Ä–µ–º—è –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    ends = usage.ru_stime; // –≤—Ä–µ–º—è –≤ —Ä–µ–∂–∏–º–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

    // –í—ã–≤–æ–¥–∏–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // tv_sec ‚Äî —Å–µ–∫—É–Ω–¥—ã, tv_usec ‚Äî –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã
    printf("Started at user mode:  %ld.%06ld\n", startu.tv_sec,  startu.tv_usec);
    printf("Ended   at user mode:  %ld.%06ld\n", endu.tv_sec,    endu.tv_usec);

    // –í—ã–≤–æ–¥–∏–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ —Å–∏—Å—Ç–µ–º—ã (—è–¥—Ä–∞)
    printf("Started at system mode:%ld.%06ld\n", starts.tv_sec, starts.tv_usec);
    printf("Ended   at system mode:%ld.%06ld\n", ends.tv_sec,   ends.tv_usec);

    // –í—ã–≤–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º (–≤ –±–∞–π—Ç–∞—Ö)
    // –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –û–° ru_maxrss –º–æ–∂–µ—Ç –∏–∑–º–µ—Ä—è—Ç—å—Å—è –Ω–µ –≤ –±–∞–π—Ç–∞—Ö, –∞ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∏–ª–∏ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö ‚Äî
    // —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
    printf("Total memory usage:    %ld bytes\n", usage.ru_maxrss);
    
    return 0; // —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
}


//------------------------------------------------------
// –ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –±–æ–ª—å—à–µ –ø–æ–ª–µ–π –∏–∑ struct rusage
//------------------------------------------------------
/*
#include <sys/time.h>     // struct timeval
#include <sys/resource.h> // struct rusage, getrusage
#include <unistd.h>
#include <stdio.h>

int main()
{
    struct rusage usage;
    struct timeval startu, endu;
    struct timeval starts, ends;
    int k = 0;

    // –°–Ω–∏–º–∞–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –î–û –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    getrusage(RUSAGE_SELF, &usage);
    startu = usage.ru_utime; // –≤—Ä–µ–º—è –≤ —Ä–µ–∂–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
    starts = usage.ru_stime; // –≤—Ä–µ–º—è –≤ —Ä–µ–∂–∏–º–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

    // –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
    for (int i = 0; i < 10000; i++)
    {
        for (int j = 0; j < 10000; j++)
        {
            k += 20;
        }
    }

    // –°–Ω–∏–º–∞–µ–º –ø–æ–∫–∞–∑–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ü–û–°–õ–ï –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    getrusage(RUSAGE_SELF, &usage);
    endu = usage.ru_utime;
    ends = usage.ru_stime;

    printf("=== CPU time ===\n");
    printf("User time   start: %ld.%06ld s\n", startu.tv_sec,  startu.tv_usec);
    printf("User time   end:   %ld.%06ld s\n", endu.tv_sec,    endu.tv_usec);
    printf("System time start: %ld.%06ld s\n", starts.tv_sec, starts.tv_usec);
    printf("System time end:   %ld.%06ld s\n", ends.tv_sec,   ends.tv_usec);

    printf("\n=== rusage fields ===\n");
    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–π) –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
    // –ù–∞ Linux –æ–±—ã—á–Ω–æ –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö, –Ω–∞ BSD/Unix –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ‚Äë–¥—Ä—É–≥–æ–º—É.
    printf("ru_maxrss:   %ld  (max resident set size)\n", usage.ru_maxrss);

    // –ü–æ Linux man: —ç—Ç–∏ –ø–æ–ª—è —á–∞—Å—Ç–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è (0), –Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—ã.
    printf("ru_ixrss:    %ld  (integral shared memory size, obsolete on many systems)\n",
           usage.ru_ixrss);
    printf("ru_idrss:    %ld  (integral unshared data size)\n",
           usage.ru_idrss);
    printf("ru_isrss:    %ld  (integral unshared stack size)\n",
           usage.ru_isrss);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –¥–∏—Å–∫—É (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ, –∏ —á–∞—Å—Ç–æ 0 –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º)
    printf("ru_minflt:   %ld  (soft page faults, no I/O)\n", usage.ru_minflt);
    printf("ru_majflt:   %ld  (hard page faults, require I/O)\n", usage.ru_majflt);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ (–Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–æ—á–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤)
    printf("ru_inblock:  %ld  (block input operations)\n", usage.ru_inblock);
    printf("ru_oublock:  %ld  (block output operations)\n", usage.ru_oublock);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—ã–ª–æ–∫ –∏ –ø—Ä–∏—ë–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IPC, —Å–æ–∫–µ—Ç—ã –∏ —Ç.–ø.)
    printf("ru_msgsnd:   %ld  (IPC messages sent)\n", usage.ru_msgsnd);
    printf("ru_msgrcv:   %ld  (IPC messages received)\n", usage.ru_msgrcv);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å—É
    printf("ru_nsignals: %ld  (signals received)\n", usage.ru_nsignals);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø—Ä–æ—Ü–µ—Å—Å —Å–∞–º —É—Å—Ç—É–ø–∏–ª CPU, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞)
    printf("ru_nvcsw:    %ld  (voluntary context switches)\n", usage.ru_nvcsw);

    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –≤—ã—Ç–µ—Å–Ω–µ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º)
    printf("ru_nivcsw:   %ld  (involuntary context switches)\n", usage.ru_nivcsw);

    return 0;
}
*/