/*
//------------------------------------------------------
//        –û—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç—å—é
//------------------------------------------------------
// –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å dynamic memory / —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏:
//
// üí• –ù–µ–≤–µ—Ä–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
// üí• –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
// üí• –ü–æ–≤—Ç–æ—Ä–Ω—ã–π free –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –±–ª–æ–∫–∞
// üí• –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ (–ø–æ—Ç–µ—Ä—è —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫)
// üí• –û—à–∏–±–∫–∏ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
// üí• –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–ª–æ–∫
//------------------------------------------------------
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void) 
{
    //==================================================
    // –ù–µ–≤–µ—Ä–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
    //==================================================
    // free –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –ø–∞–º—è—Ç–∏, –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π malloc/calloc/realloc.
    // –ù–ï–õ–¨–ó–Ø –≤—ã–∑—ã–≤–∞—Ç—å free –¥–ª—è:
    //   - –ª–æ–∫–∞–ª—å–Ω—ã—Ö (—Å—Ç–µ–∫–æ–≤—ã—Ö) –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    //   - –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö/—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    //   - —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤
    int *p1;
    int m = 100;

    p1 = &m;      // p1 —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é (—Å—Ç–µ–∫–æ–≤—É—é) –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é m
    free(p1);     // –û–®–ò–ë–ö–ê! –ü–æ–ø—ã—Ç–∫–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Å—Ç–µ–∫–æ–≤—É—é –ø–∞–º—è—Ç—å.
                  // –ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å.

    //==================================================
    // –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
    //==================================================
    // –ü–æ—Å–ª–µ free —É–∫–∞–∑–∞—Ç–µ–ª—å –°–¢–ê–ù–û–í–ò–¢–°–Ø "–≤–∏—Å—è—á–∏–º" (dangling pointer):
    //   –æ–Ω –≤—Å—ë –µ—â—ë —Ö—Ä–∞–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π –∞–¥—Ä–µ—Å, –Ω–æ —ç—Ç–æ—Ç –±–ª–æ–∫ –ø–∞–º—è—Ç–∏ —É–∂–µ –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≤–∞–º.
    // –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Ç–∞–∫–æ–π —É–∫–∞–∑–∞—Ç–µ–ª—å ‚Äî –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
    int *p2;
    p2 = malloc(sizeof(int)); // –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ–¥ –æ–¥–∏–Ω int
    *p2 = 99;                 // –∑–∞–ø–∏—Å—å –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å
    free(p2);                 // –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

    *p2 = 100;  // –û–®–ò–ë–ö–ê! –ü–∞–º—è—Ç—å —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å p2 –±–æ–ª—å—à–µ –Ω–µ–ª—å–∑—è.

    /*
    –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∞–∫:

    int *p2 = malloc(sizeof(int));
    *p2 = 99;
    *p2 = 100;   // –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ free
    free(p2);    // –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ p2 –±–æ–ª—å—à–µ –Ω–µ–ª—å–∑—è —Ä–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å
    p2 = NULL;   // —Ö–æ—Ä–æ—à–∏–π —Å—Ç–∏–ª—å ‚Äî –æ–±–Ω—É–ª–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å
    */

    //==================================================
    // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π free (double free)
    //==================================================
    // –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ free –¥–ª—è —Ç–æ–≥–æ –∂–µ —É–∫–∞–∑–∞—Ç–µ–ª—è, –Ω–µ –æ–±–Ω—É–ª—ë–Ω–Ω–æ–≥–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ,
    // –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—é —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞.
    // –≠—Ç–æ —Ç–∞–∫–∂–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
    char *str1 = malloc(strlen("Hello world") + 1); // +1 –¥–ª—è '\0'
    strcpy(str1, "Hello world");
    // ...
    free(str1);       // –ü–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω–Ω—ã–π free
    // ...
    free(str1);       // –û–®–ò–ë–ö–ê! –í—Ç–æ—Ä–æ–π free —Ç–æ–≥–æ –∂–µ –∞–¥—Ä–µ—Å–∞.

    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏—ë–º:
    //   free(str1);
    //   str1 = NULL;
    // –í—Ç–æ—Ä–æ–π free(NULL) –±–µ–∑–æ–ø–∞—Å–µ–Ω (–ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É free(NULL) –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç).

    //==================================================
    // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sizeof –∏ malloc (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏)
    //==================================================
    // –†–∞–∑–º–µ—Ä —Ç–∏–ø–æ–≤ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö.
    // –ù–µ–ª—å–∑—è "–∂—ë—Å—Ç–∫–æ" –ø–∏—Å–∞—Ç—å —á–∏—Å–ª–æ –±–∞–π—Ç, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å –ø–æ–¥ —Ç–∏–ø.
    int *p3;
    p3 = malloc(4);   // –ü–õ–û–•–û: –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ sizeof(int) == 4.
                      // –ù–∞ –¥—Ä—É–≥–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ int –º–æ–∂–µ—Ç –±—ã—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, 2 –∏–ª–∏ 8 –±–∞–π—Ç.

    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
    //   p3 = malloc(sizeof(int));
    // –∏–ª–∏
    //   p3 = malloc(sizeof *p3);
    // –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—ã–¥–µ–ª–∏—Ç—Å—è —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ –±–∞–π—Ç, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –ø–æ–¥ –æ–¥–∏–Ω int.

    //==================================================
    // –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏
    //==================================================
    // –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –∞–¥—Ä–µ—Å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ —Ç–µ—Ä—è–µ—Ç—Å—è
    // (–Ω–∞ –Ω–µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∏ –æ–¥–∏–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å), –Ω–æ free –Ω–µ –±—ã–ª –≤—ã–∑–≤–∞–Ω.
    int *p4 = malloc(sizeof(int)); // –≤—ã–¥–µ–ª–∏–ª–∏ –ø–∞–º—è—Ç—å
    *p4 = 5;
    // –ó–¥–µ—Å—å –≤ p4 —Ö—Ä–∞–Ω–∏—Ç—Å—è –∞–¥—Ä–µ—Å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞.

    p4 = malloc(sizeof(int));      // –û–®–ò–ë–ö–ê: –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ p4 –ù–û–í–´–ú –∞–¥—Ä–µ—Å–æ–º
                                   // –ü–µ—Ä–≤—ã–π –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ –ù–ò–ö–¢–û –Ω–µ –º–æ–∂–µ—Ç –æ—Å–≤–æ–±–æ–¥–∏—Ç—å:
                                   // —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ —É—Ç–µ—Ä—è–Ω–∞ ‚Äî —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏.

    /*
    –ü—Ä–∞–≤–∏–ª—å–Ω–æ:

    int *p4 = malloc(sizeof(int));
    *p4 = 5;
    free(p4);                      // –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –ø–µ—Ä–≤—ã–π –±–ª–æ–∫
    p4 = malloc(sizeof(int));      // —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –Ω–æ–≤—ã–π
    */

    //==================================================
    // –û—à–∏–±–∫–∏ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
    //==================================================
    // –ü—Ä–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–û–ë–ê–ô–¢–û–í–û–ï –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:
    // –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –í–°–ï –ø–æ–ª—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ ‚Äî –ö–ê–ö –ê–î–†–ï–°–ê.
    // –í –∏—Ç–æ–≥–µ –¥–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞–º—è—Ç—å.
    struct st1 { char *s; } t1, t2;

    t1.s = malloc(10);             // –≤—ã–¥–µ–ª–∏–ª–∏ 10 –±–∞–π—Ç –ø–æ–¥ —Å—Ç—Ä–æ–∫—É
    strcpy(t1.s, "Hello ");        // –∑–∞–ø–∏—Å–∞–ª–∏ —Å—Ç—Ä–æ–∫—É –≤ t1.s

    t2 = t1;                       // –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: t2.s == t1.s (–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∞–¥—Ä–µ—Å)
    printf("%s\n", t2.s);          // "Hello "

    strcpy(t1.s, "world!");        // –∏–∑–º–µ–Ω—è–µ–º —Å—Ç—Ä–æ–∫—É —á–µ—Ä–µ–∑ t1.s
    printf("%s\n", t2.s);          // –ò–ó–ú–ï–ù–ò–õ–ê–°–¨ —Ç–æ–∂–µ, —Ç.–∫. t2.s —É–∫–∞–∑—ã–≤–∞–µ—Ç –≤ —Ç—É –∂–µ –ø–∞–º—è—Ç—å
    printf("%s\n", t1.s);          // "world!", —Ç–∞ –∂–µ –æ–±–ª–∞—Å—Ç—å

    // –ó–¥–µ—Å—å –æ–±–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–ª–æ–∫ –ø–∞–º—è—Ç–∏.
    // –ï—Å–ª–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ t1.s, t2.s —Å—Ç–∞–Ω–µ—Ç –≤–∏—Å—è—á–∏–º —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
    // –¢–∞–∫–∂–µ –º—ã –¥–æ–ª–∂–Ω—ã –ù–ï –ó–ê–ë–´–¢–¨ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —ç—Ç—É –ø–∞–º—è—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑.

    //==================================================
    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –ë–ï–ó —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (–º–∞—Å—Å–∏–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ)
    //==================================================
    // –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ù–ï —É–∫–∞–∑–∞—Ç–µ–ª–∏, –∞ –º–∞—Å—Å–∏–≤—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
    // –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –°–ê–ú–ê –ü–ê–ú–Ø–¢–¨ –º–∞—Å—Å–∏–≤–∞.
    // –í t1.s –∏ t2.s –Ω–∞—Ö–æ–¥—è—Ç—Å—è –î–í–ê –†–ê–ó–ù–´–• –º–∞—Å—Å–∏–≤–∞.
    struct st2 { char s[10]; } u1, u2;

    strcpy(u1.s, "Hello ");        // –∑–∞–ø–∏—Å–∞–ª–∏ —Å—Ç—Ä–æ–∫—É –≤ –º–∞—Å—Å–∏–≤ u1.s
    u2 = u1;                       // –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∞—Å—Å–∏–≤–∞ s –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º

    printf("%s\n", u2.s);          // "Hello "
    strcpy(u1.s, "world!");        // –∏–∑–º–µ–Ω—è–µ–º u1.s
    printf("%s\n", u2.s);          // –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, —Ç.–∫. —É2.s ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤
    printf("%s\n", u1.s);          // "world!"

    // –ó–¥–µ—Å—å –Ω–∏–∫–∞–∫–æ–π –æ–±—â–µ–π —Ç–æ—á–∫–∏ –≤ –ø–∞–º—è—Ç–∏ –Ω–µ—Ç: —É1.s –∏ —É2.s ‚Äî —Ä–∞–∑–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã.

    //==================================================
    // –†–∞–±–æ—Ç–∞ —Å –¥–≤—É–º—è —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏, —Å—Å—ã–ª–∞—é—â–∏–º–∏—Å—è –Ω–∞ –æ–¥–Ω—É –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏
    //==================================================
    // str1 –∏ str2 —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–ª–æ–∫ –ø–∞–º—è—Ç–∏.
    // –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –æ–±–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è "–≤–∏—Å—è—á–∏–º–∏".
    int len = strlen("Hello");
    char *s1 = malloc(len + 1);     // –≤—ã–¥–µ–ª–∏–ª–∏ len+1 –±–∞–π—Ç
    strcpy(s1, "Hello");
    char *s2 = s1;                  // –æ–±–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –û–î–ò–ù –±–ª–æ–∫

    printf("%s\n", s1);             // "Hello"
    // ... –º–Ω–æ–≥–æ –∫–æ–¥–∞
    free(s1);                       // –æ—Å–≤–æ–±–æ–¥–∏–ª–∏ –ø–∞–º—è—Ç—å, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞—é—Ç –∏ s1, –∏ s2
    // ... –µ—â—ë –∫–æ–¥
    printf("%s\n", s2);             // –û–®–ò–ë–ö–ê! –ü–∞–º—è—Ç—å —É–∂–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞, s2 ‚Äî –≤–∏—Å—è—á–∏–π —É–∫–∞–∑–∞—Ç–µ–ª—å.

    /*
    üí° –ß—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å —Ç–∞–∫—É—é –æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø–æ—Å–ª–µ free –ø–æ–ª–µ–∑–Ω–æ:
        free(s1);
        s1 = NULL;
    –∏ —Å—Ç–∞—Ä–∞—Ç—å—Å—è –Ω–µ –¥–µ—Ä–∂–∞—Ç—å "–¥—É–±–ª–∏–∫–∞—Ç—ã" —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –±–µ–∑ —Å—Ç—Ä–æ–≥–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
    */

    //==================================================
    // –û–±—Ä–∞—â–µ–Ω–∏–µ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –º–∞—Å—Å–∏–≤–∞ (off-by-one)
    //==================================================
    size_t const SIZE = 10;
    int *arr = malloc(sizeof(int) * SIZE);  // –º–∞—Å—Å–∏–≤ –∏–∑ SIZE —ç–ª–µ–º–µ–Ω—Ç–æ–≤

    arr[SIZE] = 100; // –û–®–ò–ë–ö–ê! –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –æ—Ç 0 –¥–æ SIZE-1.
                     // arr[SIZE] ‚Äî —ç—Ç–æ –≠–õ–ï–ú–ï–ù–¢ –ó–ê –ì–†–ê–ù–ò–¶–ï–ô –º–∞—Å—Å–∏–≤–∞.

    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
    //   arr[SIZE - 1] = 100;

    /*
    üî• –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ —Å –¥–ª–∏–Ω–æ–π SIZE –∏–º–µ–µ—Ç –∏–Ω–¥–µ–∫—Å SIZE - 1,
       —Ç.–∫. –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0.
    */

    // –í –∫–æ–Ω—Ü–µ "–Ω–æ—Ä–º–∞–ª—å–Ω–æ–π" –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω—É–∂–Ω–æ –±—ã–ª–æ –±—ã:
    //   free(arr);
    // –Ω–æ –∑–¥–µ—Å—å –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∏ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É.

    return 0;
}