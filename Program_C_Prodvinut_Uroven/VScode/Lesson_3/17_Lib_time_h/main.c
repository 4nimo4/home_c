/*
//------------------------------------------------------
// Библиотека time.h
// Работаем со временем
//------------------------------------------------------
Заголовочный файл time.h определяет функции для работы с датой и
временем. В частности, функция time возвращает текущие дату и время в
виде объекта типа time_t:

    time_t mytime = time(NULL);

Чтобы получить «разложенную» дату/время (год, месяц, день, часы, минуты
и т.д.), нужно преобразовать time_t в структуру tm с помощью функции
localtime():

    time_t mytime = time(NULL);
    struct tm *now = localtime(&mytime);

Структура tm хранит данные в своих полях (int), например:
    tm_year — год с 1900,
    tm_mon  — месяц от 0 до 11,
    tm_mday — день месяца от 1 до 31,
    tm_hour — часы от 0 до 23,
    tm_min  — минуты от 0 до 59,
    tm_sec  — секунды от 0 до 60 и т.д.

Эта программа показывает, как получить текущие дату и время
и красиво вывести их на экран.
*/

#include <stdio.h>  // printf
#include <time.h>   // time_t, time, struct tm, localtime

int main(void)
{
    // time_t — целочисленный тип (обычно количество секунд с 1.1.1970 UTC),
    // используемый для хранения «временной метки».
    //
    // time(NULL) возвращает текущее время в секундах с эпохи (Unix time).
    /*
    Что такое «эпоха» и Unix time На POSIX‑системах (Linux, macOS и т.п.) 
    значение time_t, возвращаемое time(), — это количество секунд, 
    прошедших с 1 января 1970 года 00:00:00 UTC (так называемая Unix‑эпоха).

    Есть два способа использовать time()
    Вариант 1: с NULL (чаще всего) time_t mytime = time(NULL);
    Поведение:
    функция берёт текущее время, возвращает его как time_t (через return),
    игнорирует аргумент, потому что он NULL (ничего никуда не записывает).
    Это самый популярный короткий способ получить «текущее время» в виде time_t.
    После этого обычно делают:
    struct tm *now = localtime(&mytime);
    чтобы разложить секунды по полям (год, месяц, день, часы и т.п.).

    Вариант 2: с указателем time_t mytime;
    time(&mytime);     // аргумент — адрес переменной
                        // mytime теперь содержит текущее время
    Здесь результат тоже возвращается (как time_t), но вдобавок записывается по адресу
    &mytime. То есть эти два варианта эквивалентны по сути:
    time_t t1 = time(NULL);

    time_t t2;
    time(&t2);
    Разница — только в стиле записи.

    Когда time() может вернуть ошибку?
    При успехе time() возвращает значение типа time_t (≥ 0).
    При ошибке может вернуть (time_t)-1 (например, если система не может получить 
    текущее время). Тогда корректный (параноидальный) код может проверять:

    time_t mytime = time(NULL);
    if (mytime == (time_t)-1)   
    {
    // обработать ошибку получения времени
    }
    На обычных десктопных Linux/Windows такое почти не встречается, но по стандарту 
    возможность есть.

    Итог по строке time_t mytime = time(NULL);
    Означает:
    Вызвать time() без записи в чужие переменные (аргумент NULL).
    Взять текущее время в секундах с 1.1.1970 00:00:00 UTC.
    Сохранить это значение в переменную mytime типа time_t. 
    После этого mytime — «сырое» время в секундах, его можно разложить 
    в поля даты/времени через localtime(&mytime) или gmtime(&mytime),
    использовать для измерения интервалов (вычитать одно значение time() из другого),
    сохранять/логировать и т.п.
    */
    time_t mytime = time(NULL);

    // localtime преобразует time_t в локальное время и возвращает указатель
    // на статическую структуру struct tm, заполненную соответствующими полями.
    //
    // Важно: указатель now указывает на внутреннюю статическую область памяти,
    // которая может быть перезаписана при следующем вызове функций времени.
    struct tm *now = localtime(&mytime);

    // Выводим дату в формате ДД.ММ.ГГГГ:
    //
    //  now->tm_mday  — день месяца (1..31)
    //  now->tm_mon   — месяц с 0 (январь) до 11 (декабрь), поэтому +1
    //  now->tm_year  — количество лет с 1900, поэтому добавляем 1900,
    //                  чтобы получить «полный» год.
    printf("Date: %d.%d.%d\n",
           now->tm_mday,
           now->tm_mon + 1,
           now->tm_year + 1900);

    // Выводим время в формате ЧЧ:ММ:СС:
    //
    //  now->tm_hour  — часы (0..23)
    //  now->tm_min   — минуты (0..59)
    //  now->tm_sec   — секунды (0..60, с учётом високосных секунд)
    printf("Time: %d:%d:%d\n",
           now->tm_hour,
           now->tm_min,
           now->tm_sec);

    return 0; // Успешное завершение программы
}