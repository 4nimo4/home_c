# Компилятор и флаги
CC     = gcc
CFLAGS = -Wall -Wextra -Wpedantic -std=c11
# -Wall включает «основной набор» полезных предупреждений
# неиспользуемые переменные, сомнительные сравнения, неявные объявления функций
# и т.п. Но он не включает все возможные предупреждения — только те, 
# что считаются «базовыми».

# -Wextra — Часто пишут вместе с -Wall 
# -Wextra включает дополнительные предупреждения, которые более строгие и помогают
# поймать тонкие ошибки или плохой стиль.
# Примеры того, что часто ловит -Wextra:
# 1. Неиспользуемые параметры функции int f(int x) {return 42;} // x не используется
# С -Wall может промолчать, с -Wextra выдаст предупреждение.
# 2. Сомнительные сравнения с 0 / логические ошибки
# 3. Проблемы с инициализацией полей в структурах / массивах
# 4. Предупреждения о знаковых/беззнаковых сравнениях (в комбинации с другими флагами)

# Флаг -Wpedantic говорит компилятору «Предупреждай о любых отклонениях от выбранного
# стандарта C (например, -std=c11), даже если компилятор сам такие расширения поддерживает».
# — про строгое следование стандарту (не пользуемся нестандартными расширениями компилятора).
# Если ты используешь что‑то, что есть только в GCC, но не входит в стандарт — -Wpedantic
# будет напоминать, что это не переносимо.
# Вместе это аставляет писать чистый, переносимый код без завязки на «фишки» конкретного
# компилятора 
# заранее показывает, где ты используешь то, что может не собраться на другой
# системе/компиляторе.

# Флаг -std=c11 говорит «Компилируй код в соответствии со стандартом языка C 2011 года (C11)»
# Зачем явно указывать?
# 1. Предсказуемость 
# Код будет собираться одинаково на разных компиляторах и платформах, потому что
# ты явно сказал, по какому стандарту его проверять.
# 2. Защита от неявных расширений Например, без -std=c11 
# компилятор может разрешить какие‑то «лишние» возможности (расширения GNU),
# которые потом не соберутся на другом компиляторе.
# 3. Учебная цель
# Хорошо понимать, что допускает стандартный C, а что — специфично для
# конкретного компилятора/платформы.

# Команда gcc -Wall -Wextra -std=c11 -c strings.c -o strings.o
# -Wall + -Wextra — максимум полезных предупреждений о странных местах в коде
# -std=c11 — проверку кода на соответствие C11.
# На такой программе разницы почти не видно, но на более сложных проектах эти флаги
# помогают: быстрее находить ошибки, писать код, который будет компилироваться одинаково 
# на разных системах. 

# Имя итоговой программы
TARGET = prog

# Цель по умолчанию — собрать программу
all: $(TARGET)

# Сборка исполняемого файла из объектного файла
$(TARGET): main.o
	$(CC) -o $(TARGET) main.o

# Компиляция исходника .c в объектный файл .o
strings.o: main.c
	$(CC) $(CFLAGS) -c main.c -o main.o

# Очистка: удалить объектные файлы и исполняемый файл
clean:
	rm -f *.o $(TARGET)

.PHONY: all clean