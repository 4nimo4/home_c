/*
//------------------------------------------------------
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
//------------------------------------------------------
–û–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∏–Ω–∞—á–µ. –û–Ω–∏
–¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ-–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∫–æ–¥ (position
independent code).
üìú –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ, –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è
–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å.
üìú –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –µ–¥–∏–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, –∞ –∑–Ω–∞—á–∏—Ç –∫–∞–∫
—É–≥–æ–¥–Ω–æ –º–æ–≥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
üìú –ö–æ–º–ø–∏–ª—è—Ü–∏—è –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ–ª–∂–Ω–∞
–≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –æ–ø—Ü–∏–µ–π -fPIC.
üìú –î–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å–æ–∑–¥–∞—é—Ç –ø—Ä–∏ –ø–æ–º–æ—â–∏ –æ–ø—Ü–∏–∏ -shared.

–ü—Ä–∏–º–µ—Ä —Å–±–æ—Ä–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
    $ gcc -c -fPIC lib.c
    $ gcc -shared -o libmy2.so lib.o

//------------------------------------------------------
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ Linux
//------------------------------------------------------
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π, –Ω–æ –∏–Ω–æ–≥–¥–∞
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ª–∏–Ω–∫–æ–≤—â–∏–∫—É –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —ç—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
–Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

–ü—Ä–∏–º–µ—Ä –ª–∏–Ω–∫–æ–≤–∫–∏ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π:
    $ gcc -o prog2 main.c -L ./ -lmy2 -rpath /home/user/mylib2/

–û–ø—Ü–∏—é -L –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–ª—è –¥–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–∞—Ç–∞–ª–æ–≥–∞—Ö –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤
GNU/Linux —ç—Ç–æ /lib/ –∏ /usr/lib/.

//------------------------------------------------------
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ Windows
//------------------------------------------------------
–í Windows –ø—Ä–∏–Ω—Ü–∏–ø —Ç–æ—Ç –∂–µ, –Ω–æ –ø—É—Ç–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –û–°:

    $ gcc -o prog2 main.c -L ./ \
      c:\geekbrains.ru\Projects\C\MIPI_AC_Git\MIPI_AdvancedC\Lect3\36\libmy2.so

//------------------------------------------------------
// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
//------------------------------------------------------
üìú –†–∞–∑–º–µ—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ–±—ã—á–Ω–æ –±–æ–ª—å—à–µ, —á–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π,
   –∞ –≤–æ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
   –Ω–∞–æ–±–æ—Ä–æ—Ç –º–µ–Ω—å—à–µ.
üìú –ü–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ, –∏
   –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ –Ω—É–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤–º–µ—Å—Ç–µ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π ‚Äî
   –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è (–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è) –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
üìú –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å—á–∏—Ç–∞—é—Ç—Å—è –ª—É—á—à–∏–º
   –ø–æ–¥—Ö–æ–¥–æ–º –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π.
*/

#include <stdio.h>   // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥: printf, scanf
#include "lib2.h"    // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞—à–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å max –∏ max3

int main()
{
    int a, b, c;     // –¢—Ä–∏ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å –º–∞–∫—Å–∏–º—É–º

    // –°—á–∏—Ç—ã–≤–∞–µ–º —Ç—Ä–∏ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (–æ–±—ã—á–Ω–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
    scanf("%d%d%d", &a, &b, &c);

    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é max3 –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ lib2:
    // –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–∑ —Ç—Ä—ë—Ö —á–∏—Å–µ–ª a, b –∏ c.
    printf("max3 = %d\n", max3(a, b, c));

    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º 0 ‚Äî —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
    return 0;
}